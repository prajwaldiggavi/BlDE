<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>IIIT-V | Faculty</title>
    <!-- Style Starts -->
    <link rel="icon" type="image/png" href="img/IIITV_Logo_1x1_small.png">
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="n.css">
    <style>
        .faculty-photo {
            max-width: 100%;
            max-height: 150px;
            height: auto;
            border-radius: 50%;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <header id="header">
            <div class="header-wrapper">
                <div class="header-container">
                    <div class="logo-name">
                        <div class="logo"><a href="index.html"><img src="https://github.com/prajwaldiggavi/BlDE/blob/image/BLD.png?raw=true" alt="logo"></a></div>
                        <div class="name">
                            <a href="index.html">
                                <h5>DEPARTMENT OF INFORMATION SCIENCE AND ENGINEERING</h5>
                                <h5 class="primary-color">BLDEACET</h5>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="header-links">
                    <a href="https://www.google.com/maps?ll=16.847732,75.718501&z=17&t=m&hl=en&gl=IN&mapclient=embed&cid=6385882878560726955" target="_blank"><i class="fa fa-map-marker fa-lg" style="color: #FF5733;" aria-hidden="true"></i></a>
                    <a href="#" data-toggle="popover" title="Phone No." data-content="+91-79-29750281" data-placement="bottom"><i class="fa fa-phone fa-lg" aria-hidden="true"></i></a>
                    <a href="https://www.youtube.com/@bldeacetmedia7621" target="_blank" title="YouTube"><i class="fa fa-youtube fa-lg" style="color: #FF0000;" aria-hidden="true"></i></a>
                    <a href="https://www.instagram.com/bldeacetmedia/" target="_blank" title="Instagram"><i class="fa fa-instagram fa-lg" style="color: #C13584;" aria-hidden="true"></i></a>
                    <a href="https://x.com/i/flow/login?redirect_after_login=%2Fbldeacet" target="_blank" title="Twitter"><i class="fa fa-twitter fa-lg" style="color: #1DA1F2;" aria-hidden="true"></i></a>
                </div>
            </div>
        </header>

        <div class="container">
            <h2>Student Details Entry</h2>
            <form id="studentForm">
                <div class="form-group">
                    <label for="studentId">Student USN:</label>
                    <input type="text" class="form-control" id="studentId" required>
                </div>
                <div class="form-group">
                    <label for="studentName">Student Name:</label>
                    <input type="text" class="form-control" id="studentName" required>
                </div>
                <div class="form-group">
                    <label for="semester">Select Semester:</label>
                    <select class="form-control" id="semester" required>
                        <option value="">--Select Semester--</option>
                        <option value="1">Semester 1</option>
                        <option value="2">Semester 2</option>
                        <option value="3">Semester 3</option>
                        <option value="4">Semester 4</option>
                        <option value="5">Semester 5</option>
                        <option value="6">Semester 6</option>
                        <option value="7">Semester 7</option>
                        <option value="8">Semester 8</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="phone_number">Phone Number:</label>
                    <input type="text" class="form-control" id="phone_number" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth:</label>
                    <input type="date" class="form-control" id="dob" required>
                </div>
                <div class="form-group">
                    <label for="gender">Gender:</label>
                    <select class="form-control" id="gender" required>
                        <option value="">--Select Gender--</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <button type="button" class="btn btn-primary" onclick="addStudent()">Add Student</button>
            </form>

            <hr>

            <h2>Show Students</h2>
            <div class="form-group">
                <label for="showSemester">Select Semester:</label>
                <select class="form-control" id="showSemester" required>
                    <option value="">--Select Semester--</option>
                    <option value="1">Semester 1</option>
                    <option value="2">Semester 2</option>
                    <option value="3">Semester 3</option>
                    <option value="4">Semester 4</option>
                    <option value="5">Semester 5</option>
                    <option value="6">Semester 6</option>
                    <option value="7">Semester 7</option>
                    <option value="8">Semester 8</option>
                </select>
                <button type="button" class="btn btn-success" onclick="showStudents()">Show Students</button>
            </div>

            <table class="table table-striped" id="studentTable">
                <thead>
                    <tr>
                        <th>USN</th>
                        <th>Name</th>
                        <th>Semester</th>
                        <th>Phone Number</th>
                        <th>Email</th>
                        <th>Date of Birth</th>
                        <th>Gender</th>
                    </tr>
                </thead>
                <tbody id="studentList"></tbody>
            </table>
        </div>

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <p>&copy; BLDEACET DEPT OF ISE.</p>
                    </div>
                </div>
            </div>
        </footer>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script>
        const serverUrl = 'https://blde-production.up.railway.app';

        function addStudent() {
            const studentId = $('#studentId').val();
            const studentName = $('#studentName').val();
            const semester = $('#semester').val();
            const phone_number = $('#phone_number').val();
            const email = $('#email').val();
            const dob = $('#dob').val();
            const gender = $('#gender').val();

            if (studentId && studentName && semester && phone_number && email && dob && gender) {
                $.ajax({
                    url: `${serverUrl}/add-student`,
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ studentId, studentName, semester, phone_number, email, dob, gender }),
                    success: function(response) {
                        alert(response);
                        $('#studentForm')[0].reset();
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            } else {
                alert('Please fill out all required fields.');
            }
        }

        function showStudents() {
            const semester = $('#showSemester').val();

            if (semester) {
                $.ajax({
                    url: `${serverUrl}/students/${semester}`,
                    type: 'GET',
                    success: function(students) {
                        $('#studentList').empty();
                        if (students.length > 0) {
                            students.forEach(student => {
                                $('#studentList').append(`
                                    <tr>
                                        <td>${student.studentId}</td>
                                        <td>${student.studentName}</td>
                                        <td>${student.semester}</td>
                                        <td>${student.phone_number}</td>
                                        <td>${student.email}</td>
                                        <td>${student.dob}</td>
                                        <td>${student.gender}</td>
                                        <td><button class="btn btn-danger" onclick="deleteStudent(${student.studentId})">Delete</button></td>
                                    </tr>
                                `);
                            });
                        } else {
                            $('#studentList').append('<tr><td colspan="8">No students found for this semester.</td></tr>');
                        }
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            } else {
                alert('Please select a semester.');
            }
        }

        function deleteStudent(studentId) {
            if (confirm(`Are you sure you want to delete student with ID: ${studentId}?`)) {
                $.ajax({
                    url: `${serverUrl}/delete-student/${studentId}`,
                    type: 'DELETE',
                    success: function(response) {
                        alert(response);
                        showStudents();
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            }
        }
    </script>

</body>

</html>
