<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IIIT-V | Faculty</title>
    <!--Style Starts-->
    <link rel="icon" type="image/png" href="img/IIITV_Logo_1x1_small.png">
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="n.css">
    <style>
        .faculty-photo {
            max-width: 100%;
            max-height: 150px;
            height: auto;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <!-- header starts here -->
        <header id="header" class="header">
            <div class="header-wrapper">
                <div class="header-container">
                    <div>
                        <div class="logo-name">
                            <div class="logo"><a href="index.html" title=""><img src="https://github.com/prajwaldiggavi/BlDE/blob/image/BLD.png?raw=true" alt="logo"></a></div>
                            <div class="name">
                                <a href="index.html" title="">
                                    <h5>DEPARTMENT OF INFORMATION SCIENCE AND ENGINEERING</h5>
                                    <h5 class="primary-color">BLDEACET</h5>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="container">
            <h2>Student Details Entry</h2>

            <form id="studentForm">
                <div class="form-group">
                    <label for="studentId">Student USN:</label>
                    <input type="text" class="form-control" id="studentId" required>
                </div>
                <div class="form-group">
                    <label for="studentName">Student Name:</label>
                    <input type="text" class="form-control" id="studentName" required>
                </div>
                <div class="form-group">
                    <label for="semester">Select Semester:</label>
                    <select class="form-control" id="semester" required>
                        <option value="">--Select Semester--</option>
                        <option value="1">Semester 1</option>
                        <option value="2">Semester 2</option>
                        <option value="3">Semester 3</option>
                        <option value="4">Semester 4</option>
                        <option value="5">Semester 5</option>
                        <option value="6">Semester 6</option>
                        <option value="7">Semester 7</option>
                        <option value="8">Semester 8</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="phone_number">Phone Number:</label>
                    <input type="text" class="form-control" id="phone_number" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth:</label>
                    <input type="date" class="form-control" id="dob" required>
                </div>
                <div class="form-group">
                    <label for="gender">Gender:</label>
                    <select class="form-control" id="gender" required>
                        <option value="">--Select Gender--</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <button type="button" class="btn btn-primary" onclick="addStudent()">Add Student</button>
            </form>

            <hr>

            <h2>Show Students</h2>
            <div class="form-group">
                <label for="showSemester">Select Semester:</label>
                <select class="form-control" id="showSemester" required>
                    <option value="">--Select Semester--</option>
                    <option value="1">Semester 1</option>
                    <option value="2">Semester 2</option>
                    <option value="3">Semester 3</option>
                    <option value="4">Semester 4</option>
                    <option value="5">Semester 5</option>
                    <option value="6">Semester 6</option>
                    <option value="7">Semester 7</option>
                    <option value="8">Semester 8</option>
                </select>
                <button type="button" class="btn btn-success" onclick="showStudents()">Show Students</button>
            </div>

            <table class="table table-striped" id="studentTable">
                <thead>
                    <tr>
                        <th>USN</th>
                        <th>Name</th>
                        <th>Semester</th>
                        <th>Phone Number</th>
                        <th>Email</th>
                        <th>Date of Birth</th>
                        <th>Gender</th>
                    </tr>
                </thead>
                <tbody id="studentList"></tbody>
            </table>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            const serverUrl = 'https://your-railway-app-url';  // Replace with your Railway URL

            function addStudent() {
                const studentId = $('#studentId').val();
                const studentName = $('#studentName').val();
                const semester = $('#semester').val();
                const phone_number = $('#phone_number').val();
                const email = $('#email').val();
                const dob = $('#dob').val();
                const gender = $('#gender').val();

                if (studentId && studentName && semester && phone_number && email && dob && gender) {
                    $.ajax({
                        url: `${serverUrl}/add-student`,
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify({ studentId, studentName, semester, phone_number, email, dob, gender }),
                        success: function(response) {
                            alert(response);
                            $('#studentForm')[0].reset();
                        },
                        error: function(error) {
                            alert('Error: ' + error.responseText);
                        }
                    });
                }
            }

            function showStudents() {
                const semester = $('#showSemester').val();

                if (semester) {
                    $.ajax({
                        url: `${serverUrl}/students/${semester}`,
                        type: 'GET',
                        success: function(students) {
                            $('#studentList').empty();
                            if (students.length > 0) {
                                students.forEach(student => {
                                    $('#studentList').append(`
                                        <tr>
                                            <td>${student.studentId}</td>
                                            <td>${student.studentName}</td>
                                            <td>${student.semester}</td>
                                            <td>${student.phone_number}</td>
                                            <td>${student.email}</td>
                                            <td>${student.dob}</td>
                                            <td>${student.gender}</td>
                                        </tr>
                                    `);
                                });
                            } else {
                                $('#studentList').append('<tr><td colspan="7">No students found for this semester.</td></tr>');
                            }
                        },
                        error: function(error) {
                            alert('Error: ' + error.responseText);
                        }
                    });
                } else {
                    alert('Please select a semester.');
                }
            }
        </script>
    </div>
</body>
</html>
