<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>IIIT-V | Faculty</title>
    <!--Style Starts-->
    <link rel="icon" type="image/png" href="img/IIITV_Logo_1x1_small.png">
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="n.css">
    <style>
        .faculty-photo {
            max-width: 100%;
            max-height: 150px; /* Adjust height as needed */
            height: auto;
            border-radius: 50%; /* Optional: makes images circular */
        }
        body {
            background-color: #f8f9fa;
        }
        .header {
            background-color: #a8e6cf; /* Light green background */
            padding: 10px 0;
            text-align: center;
            margin-bottom: 20px;
        }
        .header img {
            height: 100px; /* Adjust logo height as needed */
        }
        .department-info {
            margin: 10px 0;
        }
        .department-info h5 {
            margin: 5px 0;
        }
        .container {
            margin-top: 20px;
        }
        h2 {
            margin-bottom: 20px;
            font-size: 1.5rem; /* Adjusted header size */
        }
        .btn {
            margin-top: 10px;
            transition: background-color 0.3s, transform 0.3s; /* Smooth transition */
        }
        .btn:hover {
            background-color: #0056b3; /* Darker on hover */
            transform: scale(1.05); /* Slight scale effect */
        }
        table {
            margin-top: 20px;
        }
        footer {
            background-color: #a8e6cf; /* Light green footer */
            text-align: center;
            padding: 10px 0;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <!-- Start Your Body Code From here -->
    <div class="wrapper">
        <!-- header starts here -->
        <header id="header" class="">
            <!-- header -->
            <div class="header-wrapper">
                <div class="header-container">
                    <div>
                        <div class="logo-name">
                            <div class="logo"><a href="index.html" title=""><img src="https://github.com/prajwaldiggavi/BlDE/blob/image/BLD.png?raw=true" alt="logo"></a></div>
                            <div class="name">
                                <a href="index.html" title="">
                                    <h5>DEPARTMENT OF INFORMATION SCIENCE AND ENGINEERING</h5>
                                    <h5 class="primary-color">BLDEACET</h5>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="header-links">
                        <a href="https://www.google.com/maps?ll=16.847732,75.718501&z=17&t=m&hl=en&gl=IN&mapclient=embed&cid=6385882878560726955" target="_blank" title="Open in Google Maps">
                            <i class="fa fa-map-marker fa-lg" style="color: #FF5733;" aria-hidden="true"></i>
                        </a>
                        <a href="#" data-toggle="popover" title="Phone No." data-content="+91-79-29750281" data-placement="bottom"><i class="fa fa-phone fa-lg" aria-hidden="true"></i></a>
                        <a href="https://www.youtube.com/@bldeacetmedia7621" target="_blank" title="YouTube">
                            <i class="fa fa-youtube fa-lg" style="color: #FF0000;" aria-hidden="true"></i>
                        </a>
                        <a href="https://www.instagram.com/bldeacetmedia/" target="_blank" title="Instagram">
                            <i class="fa fa-instagram fa-lg" style="color: #C13584;" aria-hidden="true"></i>
                        </a>
                        <a href="https://x.com/i/flow/login?redirect_after_login=%2Fbldeacet" target="_blank" title="Twitter">
                            <i class="fa fa-twitter fa-lg" style="color: #1DA1F2;" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </div>
            <nav>
                <div class="navbar navbar-inverse navbar-custom" role="navigation">
                    <div class="container">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>
                        <div class="collapse navbar-collapse">
                            <ul class="nav navbar-nav">
                                <li><a href="next.html">Student Details Entry</a></li>
                                <li>
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">People <b class="caret"></b></a>
                                    <ul class="dropdown-menu multi-level">
                                        <li><a href="faculty.html">Faculty</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                                    <ul class="dropdown-menu multi-level">
                                        <li><a href="faq.html">FAQs</a></li>
                                        <li><a href="student_corner.html">Student's Corner</a></li>
                                        <li><a href="http://moodle.iiitv.ac.in" target="_blank">Moodle</a></li>
                                        <li><a href="library.html">Library</a></li>
                                        <li><a href="invited_talks.html">Invited Talks</a></li>
                                    </ul>
                                </li>
                                <li><a href="career.html">Career</a></li>
                                <li><a href="gallery.html">Photo Gallery</a></li>
                                <li><a href="attend3.html">Attendance</a></li>
                                <li><a href="ser.html">ENOTES</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <!-- Main Content -->
        <div class="container">
            <h2>Student Details Entry</h2>
            <form id="studentForm">
                <div class="form-group">
                    <label for="studentId">Student USN:</label>
                    <input type="text" class="form-control" id="studentId" required>
                </div>
                <div class="form-group">
                    <label for="studentName">Student Name:</label>
                    <input type="text" class="form-control" id="studentName" required>
                </div>
                <div class="form-group">
                    <label for="semester">Select Semester:</label>
                    <select class="form-control" id="semester" required>
                        <option value="">--Select Semester--</option>
                        <option value="1">Semester 1</option>
                        <option value="2">Semester 2</option>
                        <option value="3">Semester 3</option>
                        <option value="4">Semester 4</option>
                        <option value="5">Semester 5</option>
                        <option value="6">Semester 6</option>
                        <option value="7">Semester 7</option>
                        <option value="8">Semester 8</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="phone_number">Phone Number:</label>
                    <input type="text" class="form-control" id="phone_number" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth:</label>
                    <input type="date" class="form-control" id="dob" required>
                </div>
                <div class="form-group">
                    <label for="gender">Gender:</label>
                    <select class="form-control" id="gender" required>
                        <option value="">--Select Gender--</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <button type="button" class="btn btn-primary" onclick="addStudent()">Add Student</button>
            </form>

            <hr>

            <h2>Show Students</h2>
            <div class="form-group">
                <label for="showSemester">Select Semester:</label>
                <select class="form-control" id="showSemester" required>
                    <option value="">--Select Semester--</option>
                    <option value="1">Semester 1</option>
                    <option value="2">Semester 2</option>
                    <option value="3">Semester 3</option>
                    <option value="4">Semester 4</option>
                    <option value="5">Semester 5</option>
                    <option value="6">Semester 6</option>
                    <option value="7">Semester 7</option>
                    <option value="8">Semester 8</option>
                </select>
                <button type="button" class="btn btn-success" onclick="showStudents()">Show Students</button>
            </div>

            <table class="table table-striped" id="studentTable">
                <thead>
                    <tr>
                        <th>USN</th>
                        <th>Name</th>
                        <th>Semester</th>
                        <th>Phone Number</th>
                        <th>Email</th>
                        <th>Date of Birth</th>
                        <th>Gender</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="studentList"></tbody>
            </table>
        </div>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <p>&copy; BLDEACET DEPT OF ISE.</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
        const serverUrl = 'https://blde-production.up.railway.app'; // Backend URL

        // Function to add a student
        function addStudent() {
            const studentId = $('#studentId').val();
            const studentName = $('#studentName').val();
            const semester = $('#semester').val();
            const phone_number = $('#phone_number').val();
            const email = $('#email').val();
            const dob = $('#dob').val();
            const gender = $('#gender').val();

            if (studentId && studentName && semester && phone_number && email && dob && gender) {
                $.ajax({
                    url: `${serverUrl}/add-student`,
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ studentId, studentName, semester, phone_number, email, dob, gender }),
                    success: function(response) {
                        alert(response);
                        $('#studentForm')[0].reset(); // Clear the form
                        showStudents(); // Refresh student list
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            } else {
                alert('Please fill out all required fields.');
            }
        }

        // Function to fetch and display students by semester
        function showStudents() {
            const semester = $('#showSemester').val();

            if (semester) {
                $.ajax({
                    url: `${serverUrl}/students/${semester}`,
                    type: 'GET',
                    success: function(students) {
                        $('#studentList').empty(); // Clear previous list
                        if (students.length > 0) {
                            students.forEach(student => {
                                $('#studentList').append(`
                                    <tr id="row-${student.studentId}">
                                        <td>${student.studentId}</td>
                                        <td>${student.studentName}</td>
                                        <td>${student.semester}</td>
                                        <td>${student.phone_number}</td>
                                        <td>${student.email}</td>
                                        <td>${student.dob}</td>
                                        <td>${student.gender}</td>
                                        <td><button class="btn btn-danger" onclick="deleteStudent('${student.studentId}')">Delete</button></td>
                                    </tr>
                                `);
                            });
                        } else {
                            $('#studentList').append('<tr><td colspan="8">No students found for this semester.</td></tr>');
                        }
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            } else {
                alert('Please select a semester.');
            }
        }

        // Function to delete a student
        function deleteStudent(studentId) {
            if (confirm('Are you sure you want to delete this student?')) {
                $.ajax({
                    url: `${serverUrl}/delete-student/${studentId}`,
                    type: 'DELETE',
                    success: function(response) {
                        alert(response);
                        $(`#row-${studentId}`).remove(); // Remove row from table
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            }
        }
    </script>
</body>

</html>
