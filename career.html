<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Website</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>College Student Management</h1>

    <h2>Add Student</h2>
    <form id="studentForm">
        <label for="studentId">Student ID:</label><br>
        <input type="text" id="studentId" name="studentId"><br><br>

        <label for="studentName">Student Name:</label><br>
        <input type="text" id="studentName" name="studentName"><br><br>

        <label for="semester">Semester:</label><br>
        <input type="text" id="semester" name="semester"><br><br>

        <label for="phone_number">Phone Number:</label><br>
        <input type="text" id="phone_number" name="phone_number"><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email"><br><br>

        <label for="dob">Date of Birth:</label><br>
        <input type="date" id="dob" name="dob"><br><br>

        <label for="gender">Gender:</label><br>
        <input type="text" id="gender" name="gender"><br><br>

        <button type="button" onclick="addStudent()">Add Student</button>
    </form>

    <h2>Show Students</h2>
    <label for="showSemester">Select Semester:</label>
    <select id="showSemester">
        <option value="1">Semester 1</option>
        <option value="2">Semester 2</option>
        <option value="3">Semester 3</option>
        <option value="4">Semester 4</option>
        <option value="5">Semester 5</option>
        <option value="6">Semester 6</option>
        <option value="7">Semester 7</option>
        <option value="8">Semester 8</option>
    </select>
    <button onclick="showStudents()">Show Students</button>

    <h3>Student List</h3>
    <table id="studentList" border="1">
        <tr>
            <th>Student ID</th>
            <th>Student Name</th>
            <th>Semester</th>
            <th>Phone Number</th>
            <th>Email</th>
            <th>Date of Birth</th>
            <th>Gender</th>
        </tr>
    </table>

    <script>
        const serverUrl = 'https://blde-production.up.railway.app'; // Your Railway app URL

        function addStudent() {
            const studentId = $('#studentId').val();
            const studentName = $('#studentName').val();
            const semester = $('#semester').val();
            const phone_number = $('#phone_number').val();
            const email = $('#email').val();
            const dob = $('#dob').val();
            const gender = $('#gender').val();

            if (studentId && studentName && semester && phone_number && email && dob && gender) {
                $.ajax({
                    url: `${serverUrl}/add-student`,
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ studentId, studentName, semester, phone_number, email, dob, gender }),
                    success: function(response) {
                        alert(response);
                        $('#studentForm')[0].reset(); // Clear the form
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            } else {
                alert('Please fill out all required fields.');
            }
        }

        function showStudents() {
            const semester = $('#showSemester').val();

            if (semester) {
                $.ajax({
                    url: `${serverUrl}/students/${semester}`,
                    type: 'GET',
                    success: function(students) {
                        $('#studentList').empty();  // Clear previous list
                        if (students.length > 0) {
                            students.forEach(student => {
                                $('#studentList').append(`
                                    <tr>
                                        <td>${student.studentId}</td>
                                        <td>${student.studentName}</td>
                                        <td>${student.semester}</td>
                                        <td>${student.phone_number}</td>
                                        <td>${student.email}</td>
                                        <td>${student.dob}</td>
                                        <td>${student.gender}</td>
                                    </tr>
                                `);
                            });
                        } else {
                            $('#studentList').append('<tr><td colspan="7">No students found for this semester.</td></tr>');
                        }
                    },
                    error: function(error) {
                        alert('Error: ' + error.responseText);
                    }
                });
            } else {
                alert('Please select a semester.');
            }
        }
    </script>
</body>
</html>
